sudo: required
language: csharp
mono: none
dotnet: 2.1.4
env:
  global:
  - secure: jdpC0coifCxRupdCIT1srmgXRtUh0SOhIeCfifDkbpwshnIxJHxPCd7JdAFqG9dTt0UYK6jBSpxDfrxw57PoRwYplQXpVutWG4FgYAauzqXPKElNRlYlF3gJ57Mij8K7G13idpySDv5GIfDeKAeDw7uLXD9z3lldhsDkcTWEeMjF8s3LMsrfRgcOGjlRJOkHq96gB6ZMLJIto2JPQEVXVsSIi+WBxhk3n4izN3vY8u7QJJAewKK/bEAIz9vGbZQyO8pQeNmCqpTHERZUxkZJKFaxSFnfQPx09ragTIwgK8bSIvRUY/mdLhZIZDGFgpdE2n+1ynJBMUfX7XYevPI2DW3TxsDea6c90sZ9s/7E2PcmIctstN9Ii/KZfDrkIY9tlwXBH+k7ZTmIBCGUxUd1iu3dJgMhXfq1VCuNnuH1pDtJd3zq/nILStGEhgehZvkkpfFTdhuwt3hmKdiuSG66Qfu+DlZvYQwyBao3ITNdleFh/mMPSYqys+g1m0fcuMigFAQJrQlDW7+g6QepchK6DrZblAaaBWVia9Qj/U28kkXrTb2bbxhE7+0Pl94mEtVEZItefHGDOWr1ou+k02ZNG0U8bOAI01o8VuKdns4VrDzS84C0OmtYA1C3Qw30tytprnUHmb2/cIgbd2xRlA0sB3XLSerCaO/3QigBhNOkMFQ=
  - secure: sM8YyvEamFcxJRz+THogvmy5Zc/0B3xrlSbm8yMsFZeRAixBSCbcJtro0WkAU+jwCYFbyr6QjbUwtPIPtddPyYJTYd+DiWdPAYbg27cMSBTjzG/MWH46HXaSIjZ9RrdLreFp3h/J7yH160Wdps87BPUfodRUXI2z3XUEKiKQ2B4l2f7u3Z7LHhXJSqPJVGMMUBOWWw3C5fvYQ/p2LODFqH+KDmVLR1F2SKDxW40tsUyl/mQB1+XqbmpMb1YDPPD3qClPEUcwxmVJremZJmMhwcqI+IeK1PuHJv0z/xE12LYJdyVkHzkOwRHMB0aU88Gx1zI1drIu9ORQw36C5RASOMEyEi1TOkitNJKAsu9Zl4I0zsM2Zz8578BZCJbnSRV1oaLZ4D3S02ZEH3qip1r7h1ujX9cqUaS4SiDiiZNX/6cvIG2wgruCFAeKTcwbpI0wgNK+hYoiDInX3YzmS9UDrbpQV2k37+GDB+snSUKjLRqVaqFNkNmJClCkuibmIGqD27lCerm007vLuieaS8QKzGLLz+QL0KOI4DdXjLrx/j8twtHwr9Bbda/PUTTkwCYj2BvoVhx2sL1VIpR0HMiinrpIq3nWTFMHFapoNDdt65B5yu6rM9s/fGjFt3uKWCyf8lCOPbs5tQN0MujUFH5DJZK8Q+/BIPuf6lRq/JGVV/g=
  - secure: eJ0O0Yoikro1EweYXFhDRQroZkzcr+N0UQh1O2+jXbiDxPTxrPM/OdGw4czm9+0QaAExrJ3d06ie48AE0HUej9V+Bs1VlBiB+rk6Qo+RgHkBlKyRr/6OMIhQWIsG13jM/lFlo4slosvddJ576kte2vtwHntGMP48kkMn4p7dTouCFh6EBXOtKSC362r6OvDpn8Skq5OhCF/BhGx02ESYAqA60LdlesD1xxKtoZFp4GIk0r2vY+xFp6ngaAIjwl1v14s+Go71lCklQSDwqWfarRH0ThTru2JL3i/JI3cwoDa2jBHcUJ8fNYAX1xgOEnkGhZfisPb8nEDPmSY97BlhhFj1LfQproYvnuP5qREq1rw9xQult6jZeUAcDD534t9BgOyR1fCSlnL/O+1rOFler6y0gfwlulTY66uaDE8B4nTRjAaRR2k3bu6ns2daIlDIDUn+PkDxshQ4/Sm4Lh6tx3n300MbtAWIBjTBj+togNu6mnGVODzFSE71JdRfY9GHOcvIN6zYw1lDmsTTdk6gPCt/u4gvNPpaQufl0S3fmvBFmyQj16a7llr2s55xuxqfc2HWJOp7sQSBNyIsCBMNAbbJvr3z0GUqk2wYmvKuFHUysum1gM43Z+QkdIpXCmajlzuwS1+VVwVU8xAYjtRwQI/XDmRu6CCrgqPCe+DTcgs=
  - secure: jnjvSXFyRGvcENXG888o43SXJQZ/GSgPiYDJYu9AkaCtB6Bq3+ecHsA+npb5zqJF2u63qi8UBpq3GWcz909BxjgYReBtZNRdtC/hO7YAkg6LRatkpkcIWZWwkRxCsM36a6K/SzRu+8doaLEA42wfKhktL4BDJiMQ7xaKgwui0p5L7P97LOpCUKD9jA+tlEu2iM6PQuQW4hFnM+FkYu8jkTIwr1jQSjSQA/NV0h+NX14sEHxk/mkWwujgXOR14jUn8DKnnXnhnVc8I5uvkyuFtG+MpLnclKfhg484nH+ojU6A9p3hs5+5YmqzAJWZoMygXoHf3GqYERdM43UAW6FCGAdwVIrbJXxuCaibLqnzFxikTAQAx3eD9LmE/je2EUkX0zKoKGyv2qpMkIACVHZOwL/diMr1VWk/vkRRkmulu70zvb8GGopF4XOO6kDYc+FxFBbVI5/8fTcudqquh7sSKw3BX8dW4zxi8ha4w4LgtDxzg9HxVuGesmlXiuO2vIcCR97eBlqw+VroAAwzY5f4aVpouPE5DO6OhOZzbO7ZzopjKNrXPQSi/kfywvrEXcSz3BfD7p/PQTC53IhdXoVfL4eitKjhI19hUEaaqgcSLPP5Ly/2SIxU90lxNYGimTWZaMuI8GWx3hhmAVsiu7VvbzZzBUQC51mMmcSWhjT9FKQ=
services:
- docker
install:
- echo $PublicKey >> $HOME/.ssh/known_hosts
script:
- docker build -t f1wm:latest . --build-arg connectionString='$ConnectionString'
- docker save f1wm:latest | bzip2 | ssh $DeployUser@$DeployServer 'bunzip2 | docker load && docker stop f1wm_webapi || true && docker rm f1wm_webapi || true && docker run --restart=always --name f1wm_webapi -d -p 80:80 f1wm:latest'
