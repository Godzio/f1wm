sudo: required
language: csharp
mono: none
dotnet: 2.1.4
env:
  global:
  - secure: sIT7J7/429Ucgo1UOYi3tGNdzZe7A6z8ANsHXCQw/Z5cSkqY91zMDKxi2cMLGvhq/+E/SJ+wanmSnzjAkvLsitjhyMwD9lFEGv7gv/81pVQOf/okGK7lJYmTSbEDMuoazpT95PYV3tMVrQAKKfsZdEsq3TIyUMidgshc2d8aME9IosS9pPu4qqUxgV/9UDpLn8B4eVD1AJXrEeOtTKZAW7Ip7zex1HdiAogn4fotZYXce+K4a3QIdUBvMPJcIfQgLwJ2MTUxcup4YCJ3z8vPxzfnreWPwx09E4PHZDeDEEYIWaM57VAw3Lnn08EAHkVcplyGU8KOnfpeg0O2NXvuBFKyFQ9Z88CflyBtGFW7VpGwiDGuknIRKFindPdMUAZQDkIIii0MuGjKgMebcEwReB6ec1Sxhp9jiWAQgT7EYu47ohGvbv8q4/B+R6kPiBQhrIOiC05GOj5cpA2nZfiwudQfKW7ny/lN4KlB+ZXousW0+jwpPcdAHguK/+xA3DJzSy2JntuQSy1MLiLwzRyqaGdAJPFeIEJBAc9OUdgwDvpeF9EnBgoL6Z+mTL2VsE4miuAgkI/Vs6XpsH7cA1paeaMdBbsHQyzrEx3zDlVAXgwwFTgaz2RmLCZyXdeGe10aeX7KrtbDMMKB84Nw1g9yRUdhRv/gOZzY+F/OPVxZplo=
  - secure: SlQHoPXLn23oxX9EXWHwcbwrl/32vhm3JistF9FjZ9uuAuJt2i31AM+feL4dRfcXt/n08Bfd9cSwkZH1F7gAWE2DQcWpizg7sTUcMlMCO6XMU5O29IkA0CNwWDL4FUR29mA1tO30lRq3dlbPhfvut03gNgKVWzVh00qCcWbYrsRMhWeU5w6gFR5Dh/KYbuTa5ZX3QhMDsgbNikExuRzWAEX81JiWKhnSooZ3Ye36TlZ4HGvk/gCjr81/JK6rx6t/KFPWKESv9mL3/baami4XCirSJqwnfVwL73PpgxqTzQ2SpK1DL2yvKxPb9eLk+Vvg1eNx7/pbK5hRcUiayM7raNISWRP6AdCTCDz6hAZ8pInnuNC0L65aS5nIriDsc5GYCGW4Jb5nAlc3IDgSn2HKlmVgT/OmuJRY6G12/iyPe0ZLH/6BmYhuTkWutvAkCzGOIybgvdk3rzMgJKvRgtU616d9hDvXJXOjtiNHvlu7bkqmh0Ow15SmYLKjKhPnRzyX76OyUcDZMmwpVLnmPNxlti96fviZz6DWNh8Rh0yNYpUPxzdQBBNP+H8HlQxuB/Aq7NPEHtCPWhpgL5jkp+Fb8+uuVEBQAR89Az8chyA3IECVcV91GtQlTm4TA8W2Y3/1IeL+qfhiCl9VGvBT7P+CGI1H+Zov0/bu3Kp77t0rHLA=
  - secure: nxwFVSuA4n6UzNO2kICwMdRBA62iZE681nc5nrhjoBV1mbObCl8z7pSHkGcRVym4IPJXVvm+QCbNn+qLdbHQNHmYaxBQdXDMhfQjjlHpUfofiWDJmZsNJsAFRR/l0kGmEIR3CvkaLs0EiClguAT6Wj8iuzQVYeeG0yFLbYae01e90XQe4V3SowHxADmRUlmqmOGAMLjVpoN1BJmlSAGyHONkMhGir8V7/1uNP4Qa1PenyZBsWywRiHAELXHh1k9RJXiKC0nXRFSK16SfR1+nqNqUBc6ZKNkzfkaNvaEdH5yRxzk4Gd+0J9ZCNiXLfhGpElgCgGQIbsJDkMx9FfSP0gl/gabku2g1EJC0pfw/U8rM1uc+qccEBtfuLkkuO48Jem6A0uZlcnGKCPT1rnrWAwK5aURmCCIzNAzo0qTS9IX7V22UAFuCedfS3Tyao+CMmeKvqTZcZ4lYifBz5uQbRO5z5GS47pDerjp4HydyurqreZYfQJuwWiwR0UJVthvWi+1n2piouZikiYOrRK+hYpW5e+HvzAn+KU8zUbNcBO/ExsCYdybgCInm4G+JWjjEbroAHl0FeZbOy09Kjcci6R2gMZxmkI3VcxQHxAvNqgAGPlzPL0lag0HZIephAftqqkImlEpnl8llO6eF11gsgHeaGP+PUoYu64DXeR7W0+I=
  - secure: KaO80Sr+9Yo79AUu4fia+1yo94WEv0ZRBRMTbewTIQ6xNSX6oT6+cxgao/GjZVryJupObabFcjF8Kd1AYYZzXpSAtNmGg71UeFOsT9B10TgQyPDRujmYf4mYJ9ENY2plh9yd/3pXy+2lrD74DeMY2m/2hFOzdQK8QVGlnxOVLxKyRIhgg0ix9sjBbKhGAox/Zb08Sko9Avcxrb1MG0BeQWI+LW9Eoqh3J2KlTJMywQ7er9f5xSGYSCF5ahBkxTot2RTubNyxVyv1PxAnDn8FBPYCKGwbMSne/AApb7syMVqMhQW4pMHLtMrSuhtkj+4ouPvFHDBa08D1TJnkmOmd9YSvGFnt8xdzaYViWqShHIr6qc/yy/KQutL3oyhZdOT3Xdsswa9RnBsoOzjbGyccBYWuqjvIaGPRGq71W2WrNLR2pqoKNeCfU5nddwFT4kfC0hSlu+bM/Adpu+QNC9y4HdmRKqw3jrjF8xDKEbQBYH6ad7on+bWaPsQgZ2Bca9ARvYa7cvpA0qtU4imfMVbXg55IE+FKOZ18ulps1VvBwoyXQCjgb7mmapjW9o9KYoWPhAbxOCGRbvBHtpQ3wPt6HR9UP9WaKz/BKqLtZ6x540AVOgkME6h31aDkoyHauwP9I1nlYtfa4j83owwmFXplAp54HNI/cK0CMA9lM1PnWMA=
services:
- docker
addons:
  ssh_known_hosts: $DeployServer
script:
- docker build -t f1wm:latest . --build-arg connectionString='$ConnectionString'
- docker save f1wm:latest | bzip2 | ssh $DeployUser@$DeployServer 'bunzip2 | docker load && docker stop f1wm_webapi || true && docker rm f1wm_webapi || true && docker run --restart=always --name f1wm_webapi -d -p 80:80 f1wm:latest'
